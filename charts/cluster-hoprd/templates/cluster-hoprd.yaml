---
apiVersion: hoprnet.org/v1alpha2
kind: ClusterHoprd
metadata:
  name: {{ include "cluster-hoprd.name" . }}
  namespace: {{ .Release.Namespace }}
  annotations:
    argocd.argoproj.io/sync-wave: "4"
spec:
  identityPoolName: {{ include "cluster-hoprd.name" . }}
  replicas: {{ .Values.clusterHoprd.replicas }}
  version: {{ .Values.clusterHoprd.version | quote }}
  enabled: {{ .Values.clusterHoprd.enabled | default true }}
  supportedRelease: {{ .Values.clusterHoprd.supportedRelease | default "kaunas" }}
  forceIdentityName: {{ .Values.clusterHoprd.forceIdentityName | default true }}
  {{- if .Values.clusterHoprd.nodes.deployment }}
  deployment: {{ .Values.clusterHoprd.nodes.deployment | toYaml | nindent 4 }}
  {{- end }}
  service:
    type: {{ .Values.clusterHoprd.nodes.service.type | default "LoadBalancer" }}
    portsAllocation: {{ .Values.clusterHoprd.nodes.service.portsAllocation | default 10 }}
  config: {{ .Values.clusterHoprd.nodes.config | toYaml | nindent 4 }}